<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SIP Wealth Forecast ‚Äî Wealth Builder</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }

    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      height: 6px;
      border-radius: 9999px;
      background: rgba(255,255,255,0.18);
      outline: none;
      cursor: pointer;
      accent-color: #D4AF37;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #D4AF37;
      cursor: pointer;
      border: 2px solid #1A237E;
      box-shadow: 0 2px 6px rgba(212,175,55,0.45);
    }
    input[type="range"].topup-range::-webkit-slider-thumb {
      background: #D4AF37;
      border-color: #0D1B4B;
    }
    input[type="range"].inflation-range::-webkit-slider-thumb {
      background: #D4AF37;
      border-color: #0D1B4B;
    }
    input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #D4AF37;
      cursor: pointer;
      border: 2px solid #1A237E;
    }

    .toggle-track { transition: background-color 0.2s ease; }
    table { border-collapse: collapse; }

    .card-glass {
      background: rgba(255,255,255,0.09);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 1rem;
    }
    .label-muted { color: rgba(255,255,255,0.7); }
    .text-white-full { color: #ffffff; }
    .gold { color: #D4AF37; }
    .badge-pill {
      display: inline-block;
      font-size: 0.75rem;
      font-weight: 700;
      padding: 2px 12px;
      border-radius: 9999px;
    }
  </style>
</head>
<body class="min-h-screen" style="background: linear-gradient(180deg, #0D1B4B 0%, #1A237E 100%); min-height: 100vh;">

  <!-- Navbar -->
  <nav style="background: #0D1B4B; min-height: 64px; border-bottom: 2px solid rgba(212,175,55,0.25);" class="px-4 flex items-center shadow-lg">
    <div class="max-w-5xl mx-auto w-full flex items-center justify-between">
      <a href="../index.html" class="flex items-center gap-2 no-underline" style="text-decoration: none;">
        <i class="ph ph-coin" style="font-size: 1.6rem; color: #D4AF37;"></i>
        <div>
          <div class="font-bold" style="color: #D4AF37; font-size: 1.05rem; letter-spacing: 0.4px; line-height: 1.2;">Wealth Builder</div>
          <div style="color: rgba(255,255,255,0.55); font-size: 0.7rem; letter-spacing: 0.5px;">SIP Wealth Forecast</div>
        </div>
      </a>
      <span class="text-sm font-medium" style="color: rgba(255,255,255,0.65);">SIP Calculator</span>
    </div>
  </nav>

  <!-- Hero -->
  <section class="text-center py-10 px-4">
    <div class="max-w-2xl mx-auto">
      <div class="flex items-center justify-center gap-3 mb-3">
        <i class="ph ph-chart-line-up" style="font-size: 2rem; color: #D4AF37;"></i>
        <h1 class="font-extrabold" style="font-size: 1.9rem; color: #ffffff; letter-spacing: -0.3px;">SIP Wealth Forecast</h1>
      </div>
      <p style="color: rgba(255,255,255,0.65); font-size: 0.95rem;">
        Plan your financial future with a Systematic Investment Plan. See how small, consistent investments compound into life-changing wealth.
      </p>
    </div>
  </section>

  <!-- Main Content -->
  <section class="pb-12 px-4">
    <div class="max-w-3xl mx-auto">

      <!-- Calculator Card -->
      <div class="card-glass p-6 md:p-8">

        <!-- Monthly Investment -->
        <div class="mb-6">
          <div class="flex items-center justify-between mb-2">
            <label class="text-sm font-semibold label-muted">Monthly Investment (Rs.)</label>
            <span id="principalVal" class="text-sm font-bold px-3 py-1 rounded-full" style="background: rgba(212,175,55,0.18); color: #D4AF37; border: 1.5px solid rgba(212,175,55,0.35);">Rs. 5,000</span>
          </div>
          <input type="range" id="principal" min="500" max="100000" step="500" value="5000" class="w-full">
          <div class="flex justify-between mt-1 text-xs label-muted">
            <span>Rs. 500</span><span>Rs. 1,00,000</span>
          </div>
        </div>

        <!-- Expected Return -->
        <div class="mb-6">
          <div class="flex items-center justify-between mb-2">
            <label class="text-sm font-semibold label-muted">Expected Annual Return (%)</label>
            <span id="rateVal" class="text-sm font-bold px-3 py-1 rounded-full" style="background: rgba(212,175,55,0.18); color: #D4AF37; border: 1.5px solid rgba(212,175,55,0.35);">12%</span>
          </div>
          <input type="range" id="rate" min="1" max="30" step="0.5" value="12" class="w-full">
          <div class="flex justify-between mt-1 text-xs label-muted">
            <span>1%</span><span>30%</span>
          </div>
        </div>

        <!-- Time Period -->
        <div class="mb-6">
          <div class="flex items-center justify-between mb-2">
            <label class="text-sm font-semibold label-muted">Time Period (Years)</label>
            <span id="yearsVal" class="text-sm font-bold px-3 py-1 rounded-full" style="background: rgba(212,175,55,0.18); color: #D4AF37; border: 1.5px solid rgba(212,175,55,0.35);">10 Yrs</span>
          </div>
          <input type="range" id="years" min="1" max="40" step="1" value="10" class="w-full">
          <div class="flex justify-between mt-1 text-xs label-muted">
            <span>1 Yr</span><span>40 Yrs</span>
          </div>
        </div>

        <!-- Top-Up Toggle -->
        <div class="mb-4">
          <label class="flex items-center gap-3 cursor-pointer">
            <div class="relative">
              <input type="checkbox" id="topupToggle" class="sr-only">
              <div id="topupTrack" class="toggle-track w-11 h-6 rounded-full" style="background: rgba(255,255,255,0.2);"></div>
              <div id="topupThumb" class="absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform duration-200" style="transform: translateX(0);"></div>
            </div>
            <div>
              <div class="flex items-center gap-1.5 text-sm font-semibold text-white-full">
                <i class="ph ph-trend-up gold"></i>
                Enable Annual Top-Up SIP
              </div>
              <div class="text-xs mt-0.5 label-muted">Automatically increase your SIP amount every year by a fixed percentage.</div>
            </div>
          </label>
        </div>

        <!-- Top-Up Rate Slider (hidden by default) -->
        <div class="mb-6" id="topupSection" style="display:none;">
          <div class="flex items-center justify-between mb-2">
            <label class="text-sm font-semibold label-muted">Annual Top-Up Rate (%)</label>
            <span id="topupVal" class="text-sm font-bold px-3 py-1 rounded-full" style="background: rgba(212,175,55,0.18); color: #D4AF37; border: 1.5px solid rgba(212,175,55,0.35);">10%</span>
          </div>
          <input type="range" class="topup-range w-full" id="topup" min="1" max="50" step="1" value="10" style="accent-color: #D4AF37;">
          <div class="flex justify-between mt-1 text-xs label-muted"><span>1%</span><span>50%</span></div>
        </div>

        <!-- Divider -->
        <hr style="border-color: rgba(255,255,255,0.12); margin: 1.5rem 0;" />

        <!-- Life Goal Badge -->
        <div id="lifeGoalBadge" class="mb-5 rounded-2xl p-4 text-center" style="background: rgba(212,175,55,0.10); border: 1.5px solid rgba(212,175,55,0.3);">
          <div id="lifeGoalIcon" class="text-3xl mb-1">üè†</div>
          <div id="lifeGoalText" class="font-bold text-base" style="color: #D4AF37;">Dream Home</div>
          <div class="text-xs mt-1 label-muted">Your SIP is building towards this goal!</div>
        </div>

        <!-- Result Summary Cards (shown when top-up is OFF) -->
        <div id="regularResultSection">
          <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
            <div class="rounded-xl p-4 text-center card-glass">
              <div class="text-xs mb-1 label-muted">Invested Amount</div>
              <div class="font-bold text-lg text-white-full" id="invested">‚Äî</div>
            </div>
            <div class="rounded-xl p-4 text-center card-glass">
              <div class="text-xs mb-1 label-muted">Estimated Returns</div>
              <div class="font-bold text-lg" id="returns" style="color: #6EE7B7;">‚Äî</div>
            </div>
            <div class="rounded-xl p-4 text-center" style="background: linear-gradient(135deg, #B8860B 0%, #D4AF37 100%); border: none;">
              <div class="text-xs mb-1 text-white opacity-80">Total Value</div>
              <div class="font-bold text-lg text-white" id="total">‚Äî</div>
            </div>
          </div>
        </div>

        <!-- Comparison Result Cards (shown when top-up is ON) -->
        <div id="comparisonResultSection" style="display:none;">
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">

            <!-- Without Top-Up -->
            <div>
              <h6 class="text-sm font-semibold text-center mb-3 flex items-center justify-center gap-1 label-muted">
                <i class="ph ph-chart-bar"></i> Without Top-Up
              </h6>
              <div class="flex flex-col gap-2">
                <div class="rounded-xl p-3 text-center card-glass">
                  <div class="text-xs mb-1 label-muted">Invested Amount</div>
                  <div class="font-bold text-white-full" id="noTopupInvested">‚Äî</div>
                </div>
                <div class="rounded-xl p-3 text-center card-glass">
                  <div class="text-xs mb-1 label-muted">Estimated Returns</div>
                  <div class="font-bold" id="noTopupReturns" style="color: #6EE7B7;">‚Äî</div>
                </div>
                <div class="rounded-xl p-3 text-center" style="background: linear-gradient(135deg, #B8860B 0%, #D4AF37 100%);">
                  <div class="text-xs mb-1 text-white opacity-80">Total Value</div>
                  <div class="font-bold text-white" id="noTopupTotal">‚Äî</div>
                </div>
              </div>
            </div>

            <!-- With Top-Up -->
            <div>
              <h6 class="text-sm font-semibold text-center mb-3 flex items-center justify-center gap-1" style="color: #D4AF37;">
                <i class="ph ph-trend-up"></i> With Top-Up
              </h6>
              <div class="flex flex-col gap-2">
                <div class="rounded-xl p-3 text-center card-glass">
                  <div class="text-xs mb-1 label-muted">Invested Amount</div>
                  <div class="font-bold text-white-full" id="topupInvested">‚Äî</div>
                </div>
                <div class="rounded-xl p-3 text-center card-glass">
                  <div class="text-xs mb-1 label-muted">Estimated Returns</div>
                  <div class="font-bold" id="topupReturns" style="color: #6EE7B7;">‚Äî</div>
                </div>
                <div class="rounded-xl p-3 text-center" style="background: linear-gradient(135deg, #D4AF37 0%, #B8860B 100%);">
                  <div class="text-xs mb-1 text-white opacity-80">Total Value</div>
                  <div class="font-bold text-white" id="topupTotal">‚Äî</div>
                </div>
              </div>
            </div>

          </div>

          <!-- Additional gain callout -->
          <div class="mt-4 p-3 rounded-xl text-center" style="background: rgba(212,175,55,0.13); border: 1.5px solid rgba(212,175,55,0.35);">
            <span class="text-xs label-muted">
              <i class="ph ph-rocket-launch"></i> Additional Value from Top-Up:
            </span>
            <span class="font-bold ml-1 gold" id="additionalGain">‚Äî</span>
          </div>
        </div>

        <!-- Divider -->
        <hr style="border-color: rgba(255,255,255,0.12); margin: 1.5rem 0;" />

        <!-- Inflation Toggle -->
        <div class="mb-4">
          <label class="flex items-center gap-3 cursor-pointer">
            <div class="relative">
              <input type="checkbox" id="inflationToggle" class="sr-only">
              <div id="inflationTrack" class="toggle-track w-11 h-6 rounded-full" style="background: rgba(255,255,255,0.2);"></div>
              <div id="inflationThumb" class="absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform duration-200" style="transform: translateX(0);"></div>
            </div>
            <div>
              <div class="flex items-center gap-1.5 text-sm font-semibold text-white-full">
                <i class="ph ph-thermometer" style="color: #FCA5A5;"></i>
                Show Inflation-Adjusted Value
              </div>
              <div class="text-xs mt-0.5 label-muted">See what your returns are worth in today's money after adjusting for inflation.</div>
            </div>
          </label>
        </div>

        <!-- Inflation Rate Slider (hidden by default) -->
        <div class="mb-6" id="inflationSection" style="display:none;">
          <div class="flex items-center justify-between mb-2">
            <label class="text-sm font-semibold label-muted">Expected Annual Inflation Rate (%)</label>
            <span id="inflationVal" class="text-sm font-bold px-3 py-1 rounded-full" style="background: rgba(212,175,55,0.18); color: #D4AF37; border: 1.5px solid rgba(212,175,55,0.35);">6%</span>
          </div>
          <input type="range" class="inflation-range w-full" id="inflation" min="1" max="15" step="0.5" value="6" style="accent-color: #D4AF37;">
          <div class="flex justify-between mt-1 text-xs label-muted"><span>1%</span><span>15%</span></div>
          <div class="text-xs mt-2 label-muted">Adjust the expected average annual inflation rate to see the real purchasing power of your returns.</div>
        </div>

        <!-- Inflation-Adjusted Result Section (hidden by default) -->
        <div id="inflationResultSection" style="display:none;" class="mt-2">

          <!-- Normal SIP Inflation-Adjusted Results -->
          <div id="inflationNormalSection">
            <h6 id="inflationNormalLabel" class="text-sm font-semibold text-center mb-3 flex items-center justify-center gap-1 label-muted" style="display:none;">
              <i class="ph ph-chart-bar"></i> Normal SIP ‚Äî Inflation Adjusted
            </h6>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
              <div class="rounded-xl p-4 text-center" style="background: rgba(212,175,55,0.13); border: 1.5px solid rgba(212,175,55,0.3);">
                <div class="text-xs mb-1 flex items-center justify-center gap-1 label-muted">
                  <i class="ph ph-coins"></i> Inflation-Adjusted Value
                </div>
                <div class="font-bold text-lg gold" id="inflationAdjustedValue">‚Äî</div>
                <div class="text-xs mt-1 label-muted">(In today's money)</div>
              </div>
              <div class="rounded-xl p-4 text-center card-glass">
                <div class="text-xs mb-1 flex items-center justify-center gap-1 label-muted">
                  <i class="ph ph-trend-down"></i> Purchasing Power Loss
                </div>
                <div class="font-bold text-lg" id="purchasingPowerLoss" style="color: #FCA5A5;">‚Äî</div>
                <div class="text-xs mt-1 label-muted">(Eroded by inflation)</div>
              </div>
            </div>
            <div class="mt-3 p-3 rounded-xl text-center text-xs label-muted" style="background: rgba(212,175,55,0.10); border: 1.5px solid rgba(212,175,55,0.25);" id="inflationCalloutText">‚Äî</div>
          </div>

          <!-- Step-Up SIP Inflation-Adjusted Results (shown only when top-up is enabled) -->
          <div id="inflationTopupSection" style="display:none;" class="mt-4">
            <h6 class="text-sm font-semibold text-center mb-3 flex items-center justify-center gap-1 label-muted">
              <i class="ph ph-trend-up"></i> Step-Up SIP ‚Äî Inflation Adjusted
            </h6>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
              <div class="rounded-xl p-4 text-center" style="background: rgba(212,175,55,0.13); border: 1.5px solid rgba(212,175,55,0.3);">
                <div class="text-xs mb-1 flex items-center justify-center gap-1 label-muted">
                  <i class="ph ph-coins"></i> Inflation-Adjusted Value
                </div>
                <div class="font-bold text-lg gold" id="inflationAdjustedValueTopup">‚Äî</div>
                <div class="text-xs mt-1 label-muted">(In today's money)</div>
              </div>
              <div class="rounded-xl p-4 text-center card-glass">
                <div class="text-xs mb-1 flex items-center justify-center gap-1 label-muted">
                  <i class="ph ph-trend-down"></i> Purchasing Power Loss
                </div>
                <div class="font-bold text-lg" id="purchasingPowerLossTopup" style="color: #FCA5A5;">‚Äî</div>
                <div class="text-xs mt-1 label-muted">(Eroded by inflation)</div>
              </div>
            </div>
            <div class="mt-3 p-3 rounded-xl text-center text-xs label-muted" style="background: rgba(212,175,55,0.10); border: 1.5px solid rgba(212,175,55,0.25);" id="inflationCalloutTextTopup">‚Äî</div>
          </div>

        </div>

        <p class="text-center mt-6 text-xs label-muted">
          * Estimated returns are based on a fixed rate and are for illustration purposes only. Actual returns may vary.
        </p>

      </div>

      <!-- Top-Up Yearly Breakdown Table -->
      <div id="topupTableSection" style="display:none;" class="mt-6">
        <div class="card-glass p-6">
          <h6 class="font-bold mb-2 flex items-center gap-2 gold">
            <i class="ph ph-table"></i> Year-by-Year Top-Up SIP Breakdown
          </h6>
          <p class="text-xs mb-4 label-muted">
            The table below shows how your monthly SIP amount increases each year due to the top-up, along with the
            yearly invested amount and the corpus (portfolio value) built up at the end of each year.
          </p>
          <div class="overflow-x-auto rounded-xl">
            <table class="w-full text-sm" style="border: 1px solid rgba(255,255,255,0.12); border-radius: 12px; overflow: hidden;">
              <thead>
                <tr style="background: rgba(212,175,55,0.15);">
                  <th class="text-center p-3 font-semibold text-xs uppercase tracking-wide gold" style="border-bottom: 1px solid rgba(255,255,255,0.12);">Year</th>
                  <th class="text-right p-3 font-semibold text-xs uppercase tracking-wide gold" style="border-bottom: 1px solid rgba(255,255,255,0.12);">Monthly SIP (Rs.)</th>
                  <th class="text-right p-3 font-semibold text-xs uppercase tracking-wide gold" style="border-bottom: 1px solid rgba(255,255,255,0.12);">Yearly Invested (Rs.)</th>
                  <th class="text-right p-3 font-semibold text-xs uppercase tracking-wide gold" style="border-bottom: 1px solid rgba(255,255,255,0.12);">Corpus at Year End (Rs.)</th>
                </tr>
              </thead>
              <tbody id="topupTableBody"></tbody>
              <tfoot id="topupTableFoot"></tfoot>
            </table>
          </div>
        </div>
      </div>

      <div class="text-center mt-6">
        <a href="../index.html" class="inline-flex items-center gap-2 text-sm font-semibold px-5 py-2 rounded-lg border transition-colors no-underline" style="color: #D4AF37; border-color: rgba(212,175,55,0.5);">
          <i class="ph ph-arrow-left"></i> Back to All Calculators
        </a>
      </div>

    </div>
  </section>

  <footer class="text-center py-5 text-sm mt-4" style="border-top: 1px solid rgba(255,255,255,0.1); color: rgba(255,255,255,0.45);">
    <small>¬© 2026 Mutual Fund Calculator ‚Äî Licensed under MIT License. Free to reuse with attribution.</small>
  </footer>

  <script src="../assets/js/app.js"></script>
  <script>
    const principalSlider = document.getElementById("principal");
    const rateSlider      = document.getElementById("rate");
    const yearsSlider     = document.getElementById("years");
    const topupToggle     = document.getElementById("topupToggle");
    const topupSlider     = document.getElementById("topup");
    const topupSection    = document.getElementById("topupSection");
    const topupTableSection = document.getElementById("topupTableSection");
    const regularResultSection    = document.getElementById("regularResultSection");
    const comparisonResultSection = document.getElementById("comparisonResultSection");
    const inflationToggle        = document.getElementById("inflationToggle");
    const inflationSlider        = document.getElementById("inflation");
    const inflationSection       = document.getElementById("inflationSection");
    const inflationResultSection = document.getElementById("inflationResultSection");

    function updateToggleUI(toggle, track, thumb) {
      if (toggle.checked) {
        track.style.background = "#D4AF37";
        thumb.style.transform  = "translateX(20px)";
      } else {
        track.style.background = "rgba(255,255,255,0.2)";
        thumb.style.transform  = "translateX(0)";
      }
    }

    // Life Goal Badge
    function updateLifeGoalBadge(P) {
      const icon = document.getElementById("lifeGoalIcon");
      const text = document.getElementById("lifeGoalText");
      const badge = document.getElementById("lifeGoalBadge");

      if (P >= 30000) {
        icon.textContent = "üèÜ";
        text.textContent = "Wealth Legacy";
        text.style.color = "#D4AF37";
        badge.style.background = "rgba(212,175,55,0.15)";
        badge.style.borderColor = "rgba(212,175,55,0.45)";
      } else if (P >= 10000) {
        icon.textContent = "üè†";
        text.textContent = "Dream Home";
        text.style.color = "#6EE7B7";
        badge.style.background = "rgba(52,211,153,0.1)";
        badge.style.borderColor = "rgba(52,211,153,0.35)";
      } else if (P >= 3000) {
        icon.textContent = "üöó";
        text.textContent = "Dream Car";
        text.style.color = "#93C5FD";
        badge.style.background = "rgba(96,165,250,0.1)";
        badge.style.borderColor = "rgba(96,165,250,0.35)";
      } else {
        icon.textContent = "üéì";
        text.textContent = "Education Fund";
        text.style.color = "#FDE68A";
        badge.style.background = "rgba(253,230,138,0.1)";
        badge.style.borderColor = "rgba(253,230,138,0.35)";
      }
    }

    // Top-up toggle
    const topupTrack = document.getElementById("topupTrack");
    const topupThumb = document.getElementById("topupThumb");
    topupToggle.addEventListener("change", function () {
      updateToggleUI(this, topupTrack, topupThumb);
      topupSection.style.display      = this.checked ? "block" : "none";
      topupTableSection.style.display = this.checked ? "block" : "none";
      calculate();
    });

    topupSlider.addEventListener("input", function () {
      document.getElementById("topupVal").textContent = formatPercent(this.value);
      calculate();
    });

    // Inflation toggle
    const inflationTrack = document.getElementById("inflationTrack");
    const inflationThumb = document.getElementById("inflationThumb");
    inflationToggle.addEventListener("change", function () {
      updateToggleUI(this, inflationTrack, inflationThumb);
      inflationSection.style.display       = this.checked ? "block" : "none";
      inflationResultSection.style.display = this.checked ? "block" : "none";
      calculate();
    });

    inflationSlider.addEventListener("input", function () {
      document.getElementById("inflationVal").textContent = formatPercent(this.value);
      calculate();
    });

    function calculate() {
      const P          = Number(principalSlider.value);
      const annualRate = Number(rateSlider.value);
      const years      = Number(yearsSlider.value);

      document.getElementById("principalVal").textContent = formatINR(P);
      document.getElementById("rateVal").textContent      = formatPercent(annualRate);
      document.getElementById("yearsVal").textContent     = years + " Yrs";

      updateLifeGoalBadge(P);

      let nominalFV;
      let regularFV;

      if (topupToggle.checked) {
        const topUpRate = Number(topupSlider.value);
        const topUpResult = calculateTopUpSIP(P, annualRate, years, topUpRate);
        const regularResult = calculateSIP(P, annualRate, years);

        // Show comparison view, hide single view
        regularResultSection.style.display    = "none";
        comparisonResultSection.style.display = "block";

        // Without top-up
        document.getElementById("noTopupInvested").textContent = formatINR(regularResult.totalInvested);
        document.getElementById("noTopupReturns").textContent  = formatINR(regularResult.estimatedReturns);
        document.getElementById("noTopupTotal").textContent    = formatINR(regularResult.futureValue);

        // With top-up
        document.getElementById("topupInvested").textContent = formatINR(topUpResult.totalInvested);
        document.getElementById("topupReturns").textContent  = formatINR(topUpResult.estimatedReturns);
        document.getElementById("topupTotal").textContent    = formatINR(topUpResult.futureValue);

        // Additional gain
        const additionalGain = topUpResult.futureValue - regularResult.futureValue;
        document.getElementById("additionalGain").textContent = formatINR(additionalGain);

        renderTopUpTable(topUpResult.yearlyBreakdown, topUpResult.totalInvested, topUpResult.futureValue);

        nominalFV = topUpResult.futureValue;
        regularFV = regularResult.futureValue;
      } else {
        // Show single view, hide comparison view
        regularResultSection.style.display    = "block";
        comparisonResultSection.style.display = "none";

        const { futureValue, totalInvested, estimatedReturns } = calculateSIP(P, annualRate, years);

        document.getElementById("invested").textContent = formatINR(totalInvested);
        document.getElementById("returns").textContent  = formatINR(estimatedReturns);
        document.getElementById("total").textContent    = formatINR(futureValue);

        nominalFV = futureValue;
        regularFV = futureValue;
      }

      // Inflation-adjusted calculation
      if (inflationToggle.checked) {
        const inflationRate = Number(inflationSlider.value);
        const inflationNormalLabel  = document.getElementById("inflationNormalLabel");
        const inflationTopupSection = document.getElementById("inflationTopupSection");

        // Normal SIP inflation-adjusted results
        const { inflationAdjustedValue, purchasingPowerLoss } = calculateInflationAdjusted(regularFV, inflationRate, years);
        document.getElementById("inflationAdjustedValue").textContent = formatINR(inflationAdjustedValue);
        document.getElementById("purchasingPowerLoss").textContent    = formatINR(purchasingPowerLoss);

        if (topupToggle.checked) {
          // Show the Normal SIP label and the Step-Up SIP section
          inflationNormalLabel.style.display  = "block";
          inflationTopupSection.style.display = "block";

          document.getElementById("inflationCalloutText").textContent =
            "Normal SIP: your corpus of " + formatINR(regularFV) +
            " will be worth " + formatINR(inflationAdjustedValue) +
            " in today\u2019s money after " + inflationRate + "% annual inflation over " + years + " years.";

          // Step-Up SIP inflation-adjusted results
          const { inflationAdjustedValue: adjTopup, purchasingPowerLoss: lossTopup } =
            calculateInflationAdjusted(nominalFV, inflationRate, years);
          document.getElementById("inflationAdjustedValueTopup").textContent = formatINR(adjTopup);
          document.getElementById("purchasingPowerLossTopup").textContent    = formatINR(lossTopup);
          document.getElementById("inflationCalloutTextTopup").textContent   =
            "Step-Up SIP: your corpus of " + formatINR(nominalFV) +
            " will be worth " + formatINR(adjTopup) +
            " in today\u2019s money after " + inflationRate + "% annual inflation over " + years + " years.";
        } else {
          // Hide the Normal SIP label and the Step-Up SIP section
          inflationNormalLabel.style.display  = "none";
          inflationTopupSection.style.display = "none";

          document.getElementById("inflationCalloutText").textContent =
            "In today\u2019s money, your corpus of " + formatINR(regularFV) +
            " will be worth " + formatINR(inflationAdjustedValue) +
            " after accounting for " + inflationRate + "% annual inflation over " + years + " years.";
        }
      }
    }

    function renderTopUpTable(breakdown, totalInvested, totalCorpus) {
      const tbody = document.getElementById("topupTableBody");
      const tfoot = document.getElementById("topupTableFoot");
      tbody.innerHTML = "";
      tfoot.innerHTML = "";

      breakdown.forEach(function (row) {
        const tr = document.createElement("tr");
        tr.style.borderBottom = "1px solid rgba(255,255,255,0.08)";
        tr.innerHTML =
          '<td class="text-center p-3 font-semibold text-xs" style="color: #ffffff;">Year ' + row.year + '</td>' +
          '<td class="text-right p-3 text-xs" style="color: rgba(255,255,255,0.7);">' + Math.round(row.monthlySIP).toLocaleString("en-IN") + '</td>' +
          '<td class="text-right p-3 text-xs" style="color: rgba(255,255,255,0.7);">' + Math.round(row.yearlyInvested).toLocaleString("en-IN") + '</td>' +
          '<td class="text-right p-3 text-xs font-semibold" style="color: #D4AF37;">' + Math.round(row.corpusAtEndOfYear).toLocaleString("en-IN") + '</td>';
        tbody.appendChild(tr);
      });

      // Footer totals row
      const tfr = document.createElement("tr");
      tfr.style.background = "rgba(212,175,55,0.15)";
      tfr.innerHTML =
        '<td class="text-center p-3 font-bold text-xs" style="color: #D4AF37;">Total</td>' +
        '<td class="text-right p-3 text-xs font-bold" style="color: #D4AF37;">‚Äî</td>' +
        '<td class="text-right p-3 text-xs font-bold" style="color: #D4AF37;">' + Math.round(totalInvested).toLocaleString("en-IN") + '</td>' +
        '<td class="text-right p-3 text-xs font-bold" style="color: #D4AF37;">' + Math.round(totalCorpus).toLocaleString("en-IN") + '</td>';
      tfoot.appendChild(tfr);
    }

    principalSlider.addEventListener("input", calculate);
    rateSlider.addEventListener("input", calculate);
    yearsSlider.addEventListener("input", calculate);

    calculate();
  </script>
</body>
</html>
